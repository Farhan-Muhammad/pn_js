<p>Allows users to upload and share files. You can upload any file of up to 5 MB in size. This feature is commonly used in social apps to share images, or in medical apps to share medical records for patients.</p><p>When a file is uploaded on a <code>channel</code>, it's stored and managed using a storage service, and associated with your key. Subscribers to that <code>channel</code> receive a file event which contains a file <code>ID</code>, <code>filename</code>, and optional <code>description</code>.</p><h2 class="inpage-link tag-link main-placeholder">Send file</h2><div><h3 class="inpage-link tag-link">Description</h3><div>Upload file / data to specified <code>channel</code>.</div><h3 class="inpage-link tag-link">Method(s)</h3><ol class="ol-margin-extra"><li><div><code class="inpage-plink tag-link block"><a href="#send-file-args-1" data-id="send-file-args-1-" title="Send File Argument 1" class="title-red" id="send-file-args-1-">pubnub.sendFile(<br>&nbsp;&nbsp;params: SendFileParams, callback?: Function<br>): Promise&lt;SendFileResult&gt;;</a></code></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>params</code></td><td> <a href="#sendfileparams">SendFile<wbr>Params</a></td><td>Yes</td><td>Parameters used to upload the file to a channel.</td></tr><tr><td><code>callback</code></td><td>Function</td><td>Optional</td><td>Function to be called with the status and result of the operation. <br>If undefined, the function returns a Promise instead.</td></tr></tbody></table></div><h4 class="inpage-link tag-link">SendFileParams</h4><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>channel</code></td><td>String</td><td>Yes</td><td></td><td>Channel to send the file to.</td></tr><tr><td><code>file</code></td><td> <a href="#fileinput">FileInput</a></td><td>Yes</td><td></td><td>File to send.</td></tr><tr><td><code>message</code></td><td>Any</td><td>Optional</td><td></td><td>Optional message to attach to the file.</td></tr><tr><td><code>cipherKey</code></td><td>String</td><td>Optional</td><td>from PubNub object</td><td>Cipher key used to encrypt the file.</td></tr><tr><td><code>storeInHistory</code></td><td>Boolean</td><td>Optional</td><td><code>true</code></td><td>Whether published file messages should be stored in the channel's history. <br>If <code>storeInHistory</code> is not specified, then the history configuration on the key is used.</td></tr><tr><td><code>ttl</code></td><td>Number</td><td>Optional</td><td>0</td><td>How long the message should be stored in the channel's history. <br>If not specified, defaults to the key set's retention value.</td></tr><tr><td><code>meta</code></td><td>Any</td><td>Optional</td><td></td><td>Metadata for the message.</td></tr></tbody></table></div></li></ol><h3 class="inpage-link tag-link">Basic Usage</h3>
    <div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token comment">// in browser</span>
<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">input</span> <span class="token operator">=</span> <span class="token pn-variable">document</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input[file]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token pn-variable">input</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword keyword-async">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">file</span> <span class="token operator">=</span> <span class="token pn-variable">input</span><span class="token punctuation">.</span><span class="token pn-variable pn-after-dot">files</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">result</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">file</span><span class="token operator">:</span> <span class="token pn-variable">file</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// in Node.js</span>
<span class="token keyword keyword-import">import</span> <span class="token pn-variable">fs</span> <span class="token keyword keyword-from">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">myFile</span> <span class="token operator">=</span> <span class="token pn-variable">fs</span><span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'./cat_picture.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">result</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">file</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token pn-variable pn-before-colon">stream</span><span class="token operator">:</span> <span class="token pn-variable">myFile</span><span class="token punctuation">,</span> <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token string">'cat_picture.jpg'</span><span class="token punctuation">,</span> <span class="token pn-variable pn-before-colon">mimeType</span><span class="token operator">:</span> <span class="token string">'application/json'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// in React and React Native</span>
<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">result</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">message</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token pn-variable pn-before-colon">test</span><span class="token operator">:</span> <span class="token string">'message'</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">value</span><span class="token operator">:</span> <span class="token number">42</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">file</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token pn-variable pn-before-colon">uri</span><span class="token operator">:</span> <span class="token pn-variable">imageUri</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token string">'cat_picture.jpg'</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">mimeType</span><span class="token operator">:</span> <span class="token string">'image/jpeg'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
    
    <h3 class="inpage-link tag-link">Returns</h3>
    <div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">id</span><span class="token operator">:</span> <span class="token pn-variable">string</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div>

<br><h3 class="inpage-link tag-link">Other Examples</h3><ol><li><h4 class="inpage-link tag-link">Usage with a message and custom cipher key</h4>
    <div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token comment">// in Node.js</span>
<span class="token keyword keyword-import">import</span> <span class="token pn-variable">fs</span> <span class="token keyword keyword-from">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">myFile</span> <span class="token operator">=</span> <span class="token pn-variable">fs</span><span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./cat_picture.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">result</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">message</span><span class="token operator">:</span> <span class="token string">'Look at this picture!'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">file</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token pn-variable pn-before-colon">data</span><span class="token operator">:</span> <span class="token pn-variable">myFile</span><span class="token punctuation">,</span> <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token string">'cat_picture.jpg'</span><span class="token punctuation">,</span> <span class="token pn-variable pn-before-colon">mimeType</span><span class="token operator">:</span> <span class="token string">'application/json'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">cipherKey</span><span class="token operator">:</span> <span class="token string">'myCipherKey'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
</li></ol></div><h2 class="inpage-link tag-link main-placeholder">List channel files</h2><div><h3 class="inpage-link tag-link">Description</h3><div>Retrieve list of files uploaded to <code>Channel</code>.</div><h3 class="inpage-link tag-link">Method(s)</h3><ol class="ol-margin-extra"><li><div><code class="inpage-plink tag-link block"><a href="#list-channel-files-args-1" data-id="list-channel-files-args-1-" title="List channel files Argument 1" class="title-red" id="list-channel-files-args-1-">pubnub.listFiles(<br>&nbsp;&nbsp;params: ListFilesParams, callback?: Function<br>): Promise&lt;ListFilesResult&gt;;</a></code></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>params</code></td><td> <a href="#listfilesparams">List<wbr>Files<wbr>Params</a></td><td>Yes</td><td>Parameters used to retrieve the list of uploaded files.</td></tr><tr><td><code>callback</code></td><td>Function</td><td>Optional</td><td>Function to be called with the status and result of the operation. <br>If undefined, the function returns a Promise instead.</td></tr></tbody></table></div><h4 class="inpage-link tag-link">ListFilesParams</h4><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>channel</code></td><td>String</td><td>Yes</td><td></td><td>Retrieve list of files for this channel.</td></tr><tr><td><code>limit</code></td><td>Number</td><td>Optional</td><td>100</td><td>Number of files to return.</td></tr><tr><td><code>next</code></td><td>String</td><td>Optional</td><td></td><td>String token to get the next batch of files.</td></tr></tbody></table></div></li></ol><h3 class="inpage-link tag-link">Basic Usage</h3>
    <div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">result</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
    
    <h3 class="inpage-link tag-link">Returns</h3>
<div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">status</span><span class="token operator">:</span> <span class="token pn-variable">number</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">data</span><span class="token operator">:</span> <span class="token pn-variable">Array</span><span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">id</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">size</span><span class="token operator">:</span> <span class="token pn-variable">number</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">created</span><span class="token operator">:</span> <span class="token pn-variable">string</span>
  <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">next</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">count</span><span class="token operator">:</span> <span class="token pn-variable">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
</div><h2 class="inpage-link tag-link main-placeholder">Get File Url</h2><div><h3 class="inpage-link tag-link">Description</h3><p>Get a file's direct download URL. This method doesn't make any API calls, and won't <code>decrypt</code> an encrypted file.</p><h3 class="inpage-link tag-link">Method(s)</h3><ol class="ol-margin-extra"><li><div><code class="inpage-plink tag-link block"><a href="#get-file-url-args-1" data-id="get-file-url-args-1-" title="Get File Url Argument 1" class="title-red" id="get-file-url-args-1-">pubnub.getFileUrl(<br>&nbsp;&nbsp;params: GetFileUrlParams<br>): string;</a></code></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>params</code></td><td><a href="#getfileurlparams">GetFileUrlParams</a></td><td>Yes</td><td>Parameters used to construct file URL..</td></tr></tbody></table></div><h4 class="inpage-link tag-link">GetFileUrlParams</h4><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>channel</code></td><td>String</td><td>Yes</td><td>Channel that the file was sent to.</td></tr><tr><td><code>id</code></td><td>String</td><td>Yes</td><td>The file's unique identifier.</td></tr><tr><td><code>name</code></td><td>String</td><td>Yes</td><td>Name of the file.</td></tr></tbody></table></div></li></ol><h3 class="inpage-link tag-link">Basic Usage</h3>
    <div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">result</span> <span class="token operator">=</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">getFileUrl</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span><span class="token punctuation">,</span> <span class="token pn-variable pn-before-colon">id</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token string">'...'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
    
    <h3 class="inpage-link tag-link">Returns</h3>
    <div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token string">'https://ps.pndsn.com/v1/files/demo/channels/my_channel/files/12345678-1234-5678-123456789012/cat_picture.jpg'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
</div><h2 class="inpage-link tag-link main-placeholder">Download file</h2><div><h3 class="inpage-link tag-link">Description</h3><div>Download file from specified <code>Channel</code>.</div><h3 class="inpage-link tag-link">Method(s)</h3><ol class="ol-margin-extra"><li><div><code class="inpage-plink tag-link block"><a href="#download-file-args-1" data-id="download-file-args-1-" title="Download file Argument 1" class="title-red" id="download-file-args-1-">pubnub.downloadFile(<br>&nbsp;&nbsp;params: DownloadFileParams, callback?: Function<br>): Promise&lt;DownloadFileResult&gt;;</a></code></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>params</code></td><td> <a href="#downloadfileparams">DownloadFileParams</a></td><td>Yes</td><td>Parameters used to download the file.</td></tr><tr><td><code>callback</code></td><td>Function</td><td>Optional</td><td>Function to be called with the status and result of the operation. If undefined, the function returns a Promise instead.</td></tr></tbody></table></div><h4 class="inpage-link tag-link">DownloadFileParams</h4><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>channel</code></td><td>String</td><td>Yes</td><td></td><td>Channel that the file was sent to.</td></tr><tr><td><code>id</code></td><td>String</td><td>Yes</td><td></td><td>The file's unique identifier.</td></tr><tr><td><code>name</code></td><td>String</td><td>Yes</td><td></td><td>Name of the file.</td></tr><tr><td><code>cipherKey</code></td><td>String</td><td>Optional</td><td>from PubNub object</td><td>Cipher key used to decrypt the file.</td></tr></tbody></table></div></li></ol><h3 class="inpage-link tag-link">Basic Usage</h3>
    <div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token comment">// In browser</span>
<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">file</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">downloadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">id</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token string">'cat_picture.jpg'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">myImageTag</span> <span class="token operator">=</span> <span class="token pn-variable">document</span><span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token pn-variable">myImageTag</span><span class="token punctuation">.</span><span class="token pn-variable pn-before-equal pn-after-dot">src</span> <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span><span class="token keyword keyword-await">await</span> <span class="token pn-variable">file</span><span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token pn-variable">document</span><span class="token punctuation">.</span><span class="token pn-variable pn-after-dot">body</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token pn-variable">myImageTag</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// In Node.js using streams:</span>
<span class="token keyword keyword-import">import</span> <span class="token pn-variable">fs</span> <span class="token keyword keyword-from">from</span> <span class="token string">'fs'</span>

<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">file</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">downloadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">id</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token string">'cat_picture.jpg'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">output</span> <span class="token operator">=</span> <span class="token pn-variable">fs</span><span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'./cat_picture.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">fileStream</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">file</span><span class="token punctuation">.</span><span class="token function">toStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token pn-variable">fileStream</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token pn-variable">output</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token pn-variable">output</span><span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token pn-variable">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'File saved to ./cat_picture.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// in React and React Native</span>
<span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">file</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">downloadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'awesomeChannel'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">id</span><span class="token operator">:</span> <span class="token pn-variable">imageId</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token string">'cat_picture.jpg'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-let">let</span> <span class="token pn-variable pn-before-equal">fileContent</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">file</span><span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
    
    <h3 class="inpage-link tag-link">Returns</h3><p>Returns instance of <a href="#pubnub-file">PubNubFile</a>.</p><br><h3 class="inpage-link tag-link">Other Examples</h3><ol><li><h4 class="inpage-link tag-link">Usage with custom cipher key</h4>
    <div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">file</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">downloadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">id</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token string">'cat_picture.jpg'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">cipherKey</span><span class="token operator">:</span> <span class="token string">'myCipherKey'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
</li></ol></div><h2 class="inpage-link tag-link main-placeholder">Delete file</h2><div><h3 class="inpage-link tag-link">Description</h3><div>Delete file from specified <code>Channel</code>.</div><h3 class="inpage-link tag-link">Method(s)</h3><ol class="ol-margin-extra"><li><div><code class="inpage-plink tag-link block"><a href="#delete-file-args-1" data-id="delete-file-args-1-" title="Delete file Argument 1" class="title-red" id="delete-file-args-1-">pubnub.deleteFile(<br>&nbsp;&nbsp;params: DeleteFileParams, callback?: Function<br>): Promise&lt;DeleteFileResult&gt;;</a></code></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>params</code></td><td> <a href="#deletefileparams">DeleteFileParams</a></td><td>Yes</td><td>Parameters used to delete the file.</td></tr><tr><td><code>callback</code></td><td>Function</td><td>Optional</td><td>Function to be called with the status and result of the operation. If undefined, the function returns a Promise instead.</td></tr></tbody></table></div><h4 class="inpage-link tag-link">DeleteFileParams</h4><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>channel</code></td><td>String</td><td>Yes</td><td>Channel that the file was sent to.</td></tr><tr><td><code>id</code></td><td>String</td><td>Yes</td><td>The file's unique identifier.</td></tr><tr><td><code>name</code></td><td>String</td><td>Yes</td><td>Name of the file.</td></tr></tbody></table></div></li></ol><h3 class="inpage-link tag-link">Basic Usage</h3>
    <div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">result</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">deleteFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">id</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token string">'cat_picture.jpg'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
    
    <h3 class="inpage-link tag-link">Returns</h3><p>Example of successful deletion:</p>
<div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">status</span><span class="token operator">:</span> <span class="token number">200</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div>
</div><h2 class="inpage-link tag-link main-placeholder">Publish file message</h2><div><h3 class="inpage-link tag-link">Description</h3><div>Publish file message from specified <code>Channel</code>.</div><h3 class="inpage-link tag-link">Method(s)</h3><ol class="ol-margin-extra"><li><div><code class="inpage-plink tag-link block"><a href="#publish-file-message-args-1" data-id="publish-file-message-args-1-" title="Publish file message Argument 1" class="title-red" id="publish-file-message-args-1-">pubnub.publishFile(<br>&nbsp;&nbsp;params: PublishFileParams, callback?: Function<br>): Promise&lt;PublishFileResult&gt;;</a></code></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>params</code></td><td> <a href="#publishfileparams">Publish<wbr>File<wbr>Params</a></td><td>Yes</td><td>Parameters used to publish the file.</td></tr><tr><td><code>callback</code></td><td>Function</td><td>Optional</td><td>Function to be called with the status and result of the operation. <br>If undefined, the function returns a Promise instead.</td></tr></tbody></table></div><h4 class="inpage-link tag-link">PublishFileParams</h4><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Defaults</th><th>Description</th></tr></thead><tbody><tr><td><code>channel</code></td><td>String</td><td>Yes</td><td></td><td>Channel to which the file was sent.</td></tr><tr><td><code>message</code></td><td>Any</td><td>Optional</td><td></td><td>Optional message to attach to the file.</td></tr><tr><td><code>fileId</code></td><td>String</td><td>Yes</td><td></td><td>The file's unique identifier.</td></tr><tr><td><code>fileName</code></td><td>String</td><td>Yes</td><td></td><td>Name of the file.</td></tr><tr><td><code>storeInHistory</code></td><td>Boolean</td><td>Optional</td><td><code>true</code></td><td>Whether published file messages should be stored in the channel's history. <br>If <code>storeInHistory</code> is not specified, then the history configuration on the key is used.</td></tr><tr><td><code>ttl</code></td><td>Number</td><td>Optional</td><td>0</td><td>How long the message should be stored in the channel's history. <br>If not specified, defaults to the key set's retention value.</td></tr><tr><td><code>meta</code></td><td>Any</td><td>Optional</td><td></td><td>Metadata for the message.</td></tr></tbody></table></div></li></ol><h3 class="inpage-link tag-link">Basic Usage</h3>
    <div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword keyword-const">const</span> <span class="token pn-variable pn-before-equal">result</span> <span class="token operator">=</span> <span class="token keyword keyword-await">await</span> <span class="token pn-variable">pubnub</span><span class="token punctuation">.</span><span class="token function">publishFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">channel</span><span class="token operator">:</span> <span class="token string">'my_channel'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">fileId</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">fileName</span><span class="token operator">:</span> <span class="token string">'cat_picture.jpg'</span><span class="token punctuation">,</span>
  <span class="token pn-variable pn-before-colon">message</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token pn-variable pn-before-colon">field</span><span class="token operator">:</span> <span class="token string">'value'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
    
    <h3 class="inpage-link tag-link">Returns</h3>
<div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token pn-variable pn-before-colon">timetoken</span><span class="token operator">:</span> <span class="token pn-variable">number</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div>
</div><h2 class="inpage-link tag-link main-placeholder">FileInput</h2><div><h3 class="inpage-link tag-link">Description</h3><div><code>FileInput</code> represents a variety of possible inputs that represent a file in different environments.</div><h4 class="inpage-link tag-link">Node.js</h4><h5 data-id="using-streams-">Using streams:</h5>
<div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
    <span class="token pn-variable pn-before-colon">stream</span><span class="token operator">:</span> <span class="token pn-variable">Readable</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
    <span class="token pn-variable">mimeType</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token pn-variable">string</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<h5 data-id="using-buffers-">Using buffers:</h5>
<div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
    <span class="token pn-variable pn-before-colon">data</span><span class="token operator">:</span> <span class="token pn-variable">Buffer</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
    <span class="token pn-variable">mimeType</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token pn-variable">string</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<h4 class="inpage-link tag-link">Browsers</h4><h5 data-id="using-file-api-">Using File API:</h5>
<div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token pn-variable">File</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
<h5 data-id="using-strings-">Using strings:</h5>
<div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
    <span class="token pn-variable pn-before-colon">data</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
    <span class="token pn-variable">mimeType</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token pn-variable">string</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<h5 data-id="using-arraybuffer-">Using ArrayBuffer:</h5>
<div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
    <span class="token pn-variable pn-before-colon">data</span><span class="token operator">:</span> <span class="token pn-variable">ArrayBuffer</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
    <span class="token pn-variable">mimeType</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token pn-variable">string</span> 
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<h4 class="inpage-link tag-link">React and React Native</h4><h5 data-id="using-uri">Using URI</h5>
<div class="code-toolbar"><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
    <span class="token pn-variable pn-before-colon">uri</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
    <span class="token pn-variable pn-before-colon">name</span><span class="token operator">:</span> <span class="token pn-variable">string</span><span class="token punctuation">,</span>
    <span class="token pn-variable">mimeType</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token pn-variable">string</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>


</div><h2 class="inpage-link tag-link main-placeholder">PubNub File</h2><div><p>Internal representation of the file used by the SDK. Depending on the environment, different methods can be used to extract the file.</p><ul><li><h5><b>Methods supported in Node.js:</b></h5><ul><li><p><code>file.toBuffer()</code> returns <code>Promise&lt;Buffer&gt;</code></p></li><li><p><code>file.toStream()</code> returns <code>Promise&lt;Readable&gt;</code></p></li><li><p><code>file.toString(encoding: string)</code> returns a string encoded using <code>encoding</code> (if not available, defaults to <code>utf8</code>)</p></li></ul></li><li><h5><b>Methods supported in a browser:</b></h5><ul><li><p><code>file.toFile()</code> returns <code>Promise&lt;File&gt;</code></p></li><li><p><code>file.toBlob()</code> returns <code>Promise&lt;Blob&gt;</code></p></li><li><p><code>file.toArrayBuffer()</code> returns <code>Promise&lt;ArrayBuffer&gt;</code></p></li><li><p><code>file.toString(encoding: string)</code> returns returns a string encoded using <code>encoding</code> (if not available, defaults to <code>utf8</code>)</p></li></ul></li><li><h5><b>React and React Native:</b></h5><ul><li><p><code>file.toBlob()</code> returns <code>Promise<blob></blob></code></p></li></ul></li></ul></div>